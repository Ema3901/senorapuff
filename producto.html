
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agregar nuevo producto - Inventario Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
  <link href="css/producto.css" rel="stylesheet" />
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar">
      <div class="sidebar-header" title="Menú">
        Inventario
      </div>
      <nav class="sidebar-nav" >
        <ul>
          <li><a href="index.html"><i class="fas fa-boxes"></i> <span>Inventario</span></a></li>
          <li><a href="deshabilitados.html"><i class="fas fa-trash-alt"></i> <span>Desactivados</span></a></li>
          <li><a href="pendientes.html"><i class="fas fa-clock"></i> <span>Pendientes Check</span></a></li>
          <li><a href="dashboard.html" class="active"><i class="fas fa-tachometer-alt"></i> Panel administrativo</a></li>
        </ul>
      </nav>
    </aside>
    <main class="main-content">
      <header class="main-header d-flex align-items-center justify-content-between flex-wrap">
        <!-- Título -->
        <h1>Gestionar Productos</h1>

        <!-- Caja de Usuario (ahora toda la caja es interactiva) -->
        <div class="user-box dropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="img/stock.jpg" alt="User Avatar" id="profileDropdown"/>
          <span>Ann Lee</span>
          <i class="fas fa-chevron-down ml-2"></i>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
            <li><a class="dropdown-item" href="login.html" onclick="handleLogout()">Cerrar sesión</a></li>
          </ul>
        </div>
      </header>

      <!-- Línea divisoria-->
      <div class="divider"></div>

      <div id="messages"></div>

      <!-- Paso 1: Selector de modo y datos del producto -->
      <div id="step1">
        <!-- Selector de modo -->
        <div class="product-form-container mb-4">
          <div class="form-header">
            <h3><i class="fas fa-cog me-2"></i>Modo de Operación</h3>
          </div>
          <div class="form-content">
            <div class="row">
              <div class="col-12">
                <div class="form-check form-check-inline me-4">
                  <input class="form-check-input" type="radio" name="mode" id="modeNew" value="new" checked>
                  <label class="form-check-label" for="modeNew">
                    <i class="fas fa-plus-circle me-2"></i>Crear nuevo producto
                  </label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="mode" id="modeExisting" value="existing">
                  <label class="form-check-label" for="modeExisting">
                    <i class="fas fa-layer-group me-2"></i>Agregar unidades a producto existente
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulario para nuevo producto -->
        <div id="newProductForm">
          <div class="product-form-container">
            <div class="form-header">
              <h3><i class="fas fa-box me-2"></i>Datos del producto</h3>
            </div>
            <div class="form-content">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="nombre" class="form-label">Nombre <span class="required">*</span></label>
                    <input type="text" class="form-control" id="nombre" required />
                  </div>
                  <div class="form-group">
                    <label for="modelo" class="form-label">Modelo <span class="required">*</span></label>
                    <input type="text" class="form-control" id="modelo" required />
                  </div>
                  <div class="form-group">
                    <label for="descripcion" class="form-label">Descripción <span class="required">*</span></label>
                    <textarea class="form-control" id="descripcion" rows="3" required></textarea>
                  </div>
                  <div class="form-group">
                    <label for="categoria" class="form-label">Categoría <span class="required">*</span></label>
                    <select class="form-select" id="categoria" required>
                      <option value="">-- Cargando... --</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="marca" class="form-label">Marca <span class="required">*</span></label>
                    <select class="form-select" id="marca" required>
                      <option value="">-- Cargando... --</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="especificaciones" class="form-label">Especificaciones técnicas <span class="required">*</span></label>
                    <textarea class="form-control" id="especificaciones" rows="3" required></textarea>
                  </div>
                  <div class="form-group">
                    <label for="foto" class="form-label">Fotografía</label>
                    <input type="file" class="form-control" id="foto" accept="image/*" />
                  </div>
                  <div class="form-group">
                    <label for="unidades" class="form-label">Número de unidades <span class="required">*</span></label>
                    <input type="number" class="form-control" id="unidades" min="1" value="1" required />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="pendiente" class="form-label">Pendiente <span class="required">*</span></label>
                    <select class="form-select" id="pendiente" required>
                      <option value="">-- Cargando... --</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="condicion" class="form-label">Condición de etiqueta <span class="required">*</span></label>
                    <select class="form-select" id="condicion" required>
                      <option value="">-- Cargando... --</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="estado" class="form-label">Estado <span class="required">*</span></label>
                    <select class="form-select" id="estado" required>
                      <option value="">-- Cargando... --</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulario para producto existente -->
        <div id="existingProductForm" class="d-none">
          <div class="product-form-container">
            <div class="form-header">
              <h3><i class="fas fa-search me-2"></i>Seleccionar producto existente</h3>
            </div>
            <div class="form-content">
              <div class="row">
                <div class="col-md-8">
                  <div class="form-group">
                    <label for="inventorySelect" class="form-label">Producto <span class="required">*</span></label>
                    <select class="form-select" id="inventorySelect" required>
                      <option value="">-- Cargando productos... --</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="newUnits" class="form-label">Nuevas unidades <span class="required">*</span></label>
                    <input type="number" class="form-control" id="newUnits" min="1" value="1" required />
                  </div>
                </div>
              </div>
              
              <!-- Información del producto seleccionado -->
              <div id="selectedProductInfo" class="d-none mt-3"></div>
            </div>
          </div>
        </div>

        <!-- Botón siguiente -->
        <div class="product-form-container">
          <div class="form-content">
            <div class="form-actions">
              <button type="button" class="btn btn-primary" id="toStep2">
                <i class="fas fa-arrow-right me-2"></i>Siguiente
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Paso 2: Unidades -->
      <div id="step2" class="d-none">
        <div class="product-form-container">
          <div class="form-header">
            <h3><i class="fas fa-boxes me-2"></i>Datos de unidades</h3>
          </div>
          <div class="form-content">
            <!-- Información del modo seleccionado -->
            <div id="step2ModeInfo" class="mb-4"></div>
            
            <div id="unitsContainer"></div>
            <div class="form-actions">
              <button type="button" class="btn btn-success" id="submitAll">
                <i class="fas fa-save me-2"></i>Guardar todo
              </button>
              <button type="button" class="btn btn-secondary ms-3" id="backTo1">
                <i class="fas fa-arrow-left me-2"></i>Regresar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Resultado -->
      <div id="result" class="d-none">
        <div class="product-form-container">
          <div class="form-header">
            <h3><i class="fas fa-check-circle me-2"></i>Resultado</h3>
          </div>
          <div class="form-content">
            <div id="output"></div>
            <div class="form-actions">
              <a href="index.html" class="btn btn-primary">
                <i class="fas fa-eye me-2"></i>Ver productos
              </a>
              <button type="button" class="btn btn-secondary ms-3" onclick="location.reload()">
                <i class="fas fa-plus me-2"></i>Procesar otro
              </button>
            </div>
          </div>
        </div>
      </div>

    </main>
  </div>

  <!-- Bootstrap JS Bundle (incluye Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Font Awesome -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
  <script src="js/mobile.js"></script>
  <script src="js/script.js"></script>
  <script src="js/session-manager.js"></script>
  <script src="js/producto.js"></script>

</body>
</html>